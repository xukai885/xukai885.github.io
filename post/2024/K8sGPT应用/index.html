<!doctype html><html lang=zh-hans><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>K8sGPT应用 | 徐同学的博客</title><meta property="og:title" content="K8sGPT应用 - 徐同学的博客"><meta property="og:type" content="article"><meta property="article:published_time" content='2024-08-05T08:00:00+08:00'><meta property="article:modified_time" content='2024-08-05T08:00:00+08:00'><meta name=Keywords content="kubernetes,k8s,linux,运维,数据库,mysql,监控,CI/CD,jenkins,docker,go语言,技术博客"><meta name=description content="k8sgpt实践应用"><meta name=author content="徐同学"><meta property="og:url" content="http://xukai885.github.io/post/2024/K8sGPT%E5%BA%94%E7%94%A8/"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=icon href=/favicon.png type=image/png><link rel="alternate icon" href=/favicon.png type=image/svg+xml><link rel=stylesheet href=/css/normalize.css><link rel=stylesheet href=/css/style.css><script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js></script><link href=https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css rel=stylesheet><link rel=stylesheet href=/css/douban.css><link rel=stylesheet href=/css/other.css></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><a id=logo href=http://xukai885.github.io/>徐同学的博客</a><p class=description>宝剑锋从磨砺出，梅花香自苦寒来✌️</p></div><div><nav id=nav-menu class=clearfix><a class=current href=http://xukai885.github.io/>首页</a>
<a href=http://xukai885.github.io/archives/ title=归档>归档</a>
<a href=http://xukai885.github.io/about/ title=关于>关于</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><style type=text/css>.post-toc{position:fixed;width:200px;margin-left:-210px;padding:5px 10px;font-family:Athelas,STHeiti,Microsoft Yahei,serif;font-size:12px;border:1px solid rgba(0,0,0,7%);border-radius:5px;background-color:rgba(255,255,255,.98);background-clip:padding-box;-webkit-box-shadow:1px 1px 2px rgba(0,0,0,.125);box-shadow:1px 1px 2px rgba(0,0,0,.125);word-wrap:break-word;white-space:nowrap;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:999;cursor:pointer;max-height:70%;overflow-y:auto;overflow-x:hidden}.post-toc .post-toc-title{width:100%;margin:0 auto;font-size:20px;font-weight:400;text-transform:uppercase;text-align:center}.post-toc .post-toc-content{font-size:15px}.post-toc .post-toc-content>nav>ul{margin:10px 0}.post-toc .post-toc-content ul{padding-left:20px;list-style:square;margin:.5em;line-height:1.8em}.post-toc .post-toc-content ul ul{padding-left:15px;display:none}@media print,screen and (max-width:1057px){.post-toc{display:none}}</style><div class=post-toc style=position:absolute;top:188px><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#一k8sgpt是什么>一、k8sgpt是什么</a></li><li><a href=#二k8sgpt配置>二、k8sgpt配置</a><ul><li><a href=#21安装>2.1、安装</a></li><li><a href=#22接入大模型>2.2、接入大模型</a></li></ul></li><li><a href=#三k8sgpt实践>三、k8sgpt实践</a><ul><li><a href=#31过滤器>3.1、过滤器</a></li><li><a href=#32集成>3.2、集成</a></li><li><a href=#33cli>3.3、CLI</a></li><li><a href=#34自动化诊断工具-k8sgpt-operator>3.4、自动化诊断工具 k8sgpt-operator</a></li></ul></li><li><a href=#四总结>四、总结</a></li></ul></nav></div></div><script type=text/javascript>$(document).ready(function(){if(e=$(".post-toc"),e.length){t=$("#main").offset().left,t<220&&e.css({width:t-10,"margin-left":0-t});var e,t,n=e.offset().top-20,s={start:{position:"absolute",top:n},process:{position:"fixed",top:20}};$(window).scroll(function(){var t=$(window).scrollTop();t<n?e.css(s.start):e.css(s.process)})}$("#TableOfContents").children().length<1&&$(".post-toc").remove()})</script><article class=post><header><h1 class=post-title>K8sGPT应用</h1></header><time datetime=2024-08-05T00:00:00Z class="post-meta meta-date dt-published">2024年8月5日</time><div class="post-meta meta-category"><span>&nbsp;|</span>
<a href=/categories/Kubernetes target=_blank>Kubernetes</a></div><div class=clear style=display:none><div class=toc-article><div class=toc-title>文章目录</div></div></div><div class=post-content><h1 id=k8sgpt运用实践>k8sgpt运用实践</h1><h2 id=一k8sgpt是什么>一、k8sgpt是什么</h2><p><a data-fancybox=gallery href=https://blog.xwnlearn.cn/api/v1/look_images/a16d45788b19266d1b8236fac465057e.png><img class=mx-auto alt src=https://blog.xwnlearn.cn/api/v1/look_images/a16d45788b19266d1b8236fac465057e.png></a></p><p>​ k8sgpt目前已经作为<a href="https://logz.io/blog/fireside-chat-with-cncf-cto-opentelemetry-more/?utm_medium=referral&amp;utm_source=cncf">云原生计算基金会</a>（CNCF）的一部分，为 Kubernetes 云原生软件工程师 (SRE) 赋予了超能力。 提供了一种简单高效的方式来扫描 Kubernetes 集群并以简单的英文句子诊断集群、节点、Pod 的相关问题。 该工具旨在将工程师们的经验编码到其分析器中，从而帮助提取最相关的信息，并通过人工智能丰富了各种诊断和分析场景。</p><p><a href=https://k8sgpt.ai/>K8sGPT</a></p><h2 id=二k8sgpt配置>二、k8sgpt配置</h2><h3 id=21安装>2.1、安装</h3><p>k8sgpt采用Go语言编写，可以在多种操作系统上编译和运行，下面演示在centos7安装k8sgpt；</p><p>下载并安装</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -LO https://github.com/k8sgpt-ai/k8sgpt/releases/download/v0.3.32/k8sgpt_amd64.rpm
</span></span><span style=display:flex><span>sudo rpm -ivh -i k8sgpt_amd64.rpm
</span></span></code></pre></td></tr></table></div></div><p>验证</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3 ~<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt version</span>
</span></span><span style=display:flex><span>k8sgpt: 0.3.32 <span style=color:#ff7b72;font-weight:700>(</span>ffd017f<span style=color:#ff7b72;font-weight:700>)</span>, built at: unknown
</span></span></code></pre></td></tr></table></div></div><h3 id=22接入大模型>2.2、接入大模型</h3><h4 id=221-支持的大模型>2.2.1、 支持的大模型</h4><p>k8sgpt目前支持的模型有很多，这里演示接入openai为例；</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3 ~<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt auth list</span>
</span></span><span style=display:flex><span>Default: 
</span></span><span style=display:flex><span>&gt; openai
</span></span><span style=display:flex><span>Active: 
</span></span><span style=display:flex><span>Unused: 
</span></span><span style=display:flex><span>&gt; openai
</span></span><span style=display:flex><span>&gt; localai
</span></span><span style=display:flex><span>&gt; azureopenai
</span></span><span style=display:flex><span>&gt; cohere
</span></span><span style=display:flex><span>&gt; amazonbedrock
</span></span><span style=display:flex><span>&gt; amazonsagemaker
</span></span><span style=display:flex><span>&gt; google
</span></span><span style=display:flex><span>&gt; noopai
</span></span><span style=display:flex><span>&gt; huggingface
</span></span><span style=display:flex><span>&gt; googlevertexai
</span></span><span style=display:flex><span>&gt; oci
</span></span></code></pre></td></tr></table></div></div><h4 id=222大模型相关配置>2.2.2、大模型相关配置</h4><p>如下演示添加自定义的大模型url，指定相关模型</p><p>-u 这里指定地址为https://api.xxx.net/v1，这里是一个openai中转服务，调用和返回结果和openai一致；</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3 ~<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt auth add -u https://api.xxx.net/v1 -m gpt-4-turbo</span>
</span></span><span style=display:flex><span>Warning: backend input is empty, will use the default value: openai
</span></span><span style=display:flex><span>Enter openai Key: openai added to the AI backend provider li
</span></span></code></pre></td></tr></table></div></div><p>修改模型为gpt-3.5-turbo</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>k8sgpt auth update openai -m gpt-3.5-turbo
</span></span></code></pre></td></tr></table></div></div><p>添加网络代理</p><p>k8sgpt相关配置文件在</p><table><thead><tr><th>OS</th><th>Path</th></tr></thead><tbody><tr><td>MacOS</td><td>~/Library/Application Support/k8sgpt/k8sgpt.yaml</td></tr><tr><td>Linux</td><td>~/.config/k8sgpt/k8sgpt.yaml</td></tr><tr><td>Windows</td><td>%LOCALAPPDATA%/k8sgpt/k8sgpt.yaml</td></tr></tbody></table><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#7ee787>ai</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>providers</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span>- <span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>openai</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>model</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>gpt-3.5-turbo</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>password</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>sk-xx</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>baseurl</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>https://api.xxx.net/v1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>temperature</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>0.7</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>topp</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>0.5</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>topk</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>50</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>maxtokens</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>2048</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>proxyEndpoint</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>http://x.x.x.x:x</span><span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic># 如过需要，添加你的网络代理到这里</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>defaultprovider</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;&#34;</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>kubeconfig</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;&#34;</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>kubecontext</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;&#34;</span><span style=color:#6e7681>
</span></span></span></code></pre></td></tr></table></div></div><p>注意点一：由于国内网络不能直接调用openai的接口，k8sgpt目前支持配置代理的方式，来调用openai的相关接口；</p><p>注意点二：如果没有官方的key，k8sgpt目前也支持配置自定义大模型地址；</p><h2 id=三k8sgpt实践>三、k8sgpt实践</h2><h3 id=31过滤器>3.1、过滤器</h3><p>k8sgpt默认配置开启如下过滤器，可以扫描集群中的Pod，Service等资源；</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt filters list</span>
</span></span><span style=display:flex><span>Active: 
</span></span><span style=display:flex><span>&gt; MutatingWebhookConfiguration
</span></span><span style=display:flex><span>&gt; Pod
</span></span><span style=display:flex><span>&gt; Deployment
</span></span><span style=display:flex><span>&gt; ReplicaSet
</span></span><span style=display:flex><span>&gt; PersistentVolumeClaim
</span></span><span style=display:flex><span>&gt; Service
</span></span><span style=display:flex><span>&gt; Ingress
</span></span><span style=display:flex><span>&gt; StatefulSet
</span></span><span style=display:flex><span>&gt; CronJob
</span></span><span style=display:flex><span>&gt; Node
</span></span><span style=display:flex><span>&gt; ValidatingWebhookConfiguration
</span></span><span style=display:flex><span>Unused: 
</span></span><span style=display:flex><span>&gt; HorizontalPodAutoScaler
</span></span><span style=display:flex><span>&gt; PodDisruptionBudget
</span></span><span style=display:flex><span>&gt; NetworkPolicy
</span></span><span style=display:flex><span>&gt; Log
</span></span><span style=display:flex><span>&gt; GatewayClass
</span></span><span style=display:flex><span>&gt; Gateway
</span></span><span style=display:flex><span>&gt; HTTPRoute
</span></span></code></pre></td></tr></table></div></div><p>如果需要启动HTTPRoute只需添加即可</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt filters add HTTPRoute</span>
</span></span><span style=display:flex><span>Filter HTTPRoute added
</span></span></code></pre></td></tr></table></div></div><h3 id=32集成>3.2、集成</h3><h4 id=321prometheus>3.2.1、prometheus</h4><p>k8sgpt目前可以与prometheus，trivy、aws结合起来对集群进行扫描；</p><p>添加prometheus集成</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt integration activate prometheus --namespace=monitoring</span>
</span></span><span style=display:flex><span>Activating prometheus integration...
</span></span><span style=display:flex><span>Found existing installation
</span></span><span style=display:flex><span>Activated integration prometheus
</span></span></code></pre></td></tr></table></div></div><p>添加成功会有两个新的过滤器</p><pre tabindex=0><code>PrometheusConfigRelabelReport
PrometheusConfigValidate
</code></pre><p><code>PrometheusConfigValidate</code>：会对Prometheus 配置进行基本的健全性检查，以确保其格式正确，并且 Prometheus 可以正确加载它；</p><p><code>PrometheusConfigRelabelReport</code>：解析Prometheus 重新标记规则并报告成功抓取目标所需的标签组；</p><h4 id=322trivy>3.2.2、trivy</h4><p>trivy集成可以分析集群漏洞，根据漏洞给出修复方案；</p><p>集成trivy，由于国内网络环境，这里已经提前安装过trivy</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt integration activate trivy --namespace=trivy-system --no-install</span>
</span></span><span style=display:flex><span>Activated integration
</span></span></code></pre></td></tr></table></div></div><p>查看新增的过滤器</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3 kai<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt filters list</span>
</span></span><span style=display:flex><span>Active: 
</span></span><span style=display:flex><span>&gt; PodDisruptionBudget
</span></span><span style=display:flex><span>&gt; Ingress
</span></span><span style=display:flex><span>&gt; Pod
</span></span><span style=display:flex><span>&gt; PrometheusConfigValidate <span style=color:#ff7b72;font-weight:700>(</span>integration<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>&gt; StatefulSet
</span></span><span style=display:flex><span>&gt; ReplicaSet
</span></span><span style=display:flex><span>&gt; Deployment
</span></span><span style=display:flex><span>&gt; Service
</span></span><span style=display:flex><span>&gt; CronJob
</span></span><span style=display:flex><span>&gt; MutatingWebhookConfiguration
</span></span><span style=display:flex><span>&gt; ValidatingWebhookConfiguration
</span></span><span style=display:flex><span>&gt; VulnerabilityReport <span style=color:#ff7b72;font-weight:700>(</span>integration<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>&gt; ConfigAuditReport <span style=color:#ff7b72;font-weight:700>(</span>integration<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>&gt; PersistentVolumeClaim
</span></span><span style=display:flex><span>&gt; Node
</span></span><span style=display:flex><span>&gt; PrometheusConfigRelabelReport <span style=color:#ff7b72;font-weight:700>(</span>integration<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>&gt; HTTPRoute
</span></span></code></pre></td></tr></table></div></div><p>trivy有两个过滤器</p><pre tabindex=0><code>&gt; VulnerabilityReport (integration)
&gt; ConfigAuditReport (integration)
</code></pre><h3 id=33cli>3.3、CLI</h3><p>explain 即可使用大模型分析问题</p><p>analyze 即可扫描集群中指定资源的异常信息</p><p>anonymize 使用此选项，数据在发送到 AI 后端之前会被匿名化。在执行分析期间，k8sgpt检索敏感数据（Kubernetes 对象名称、标签等）。这些数据在发送到 AI 后端时会被屏蔽，并替换为密钥，当将解决方案返回给用户时，可以使用该密钥对数据进行去匿名化。</p><h4 id=321分析某个命名空间下的pod拉取镜像异常>3.2.1、分析某个命名空间下的Pod拉取镜像异常；</h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt --filter=Pod --namespace=default analyze --explain</span>
</span></span><span style=display:flex><span> 100% |███████████████████████████████████████████████████████████████████| <span style=color:#ff7b72;font-weight:700>(</span>1/1, <span style=color:#a5d6ff>11</span> it/min<span style=color:#ff7b72;font-weight:700>)</span>        
</span></span><span style=display:flex><span>AI Provider: openai
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a5d6ff>0</span> default/test-75787c49dd-mvkck<span style=color:#ff7b72;font-weight:700>(</span>Deployment/test<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>- Error: rpc error: <span style=color:#79c0ff>code</span> <span style=color:#ff7b72;font-weight:700>=</span> Unknown <span style=color:#79c0ff>desc</span> <span style=color:#ff7b72;font-weight:700>=</span> Error response from daemon: manifest <span style=color:#ff7b72>for</span> nginx:99999999 not found: manifest unknown: manifest unknown
</span></span><span style=display:flex><span>错误：指定版本的nginx映像（99999999）不存在。
</span></span><span style=display:flex><span>Error: The specified version of the nginx image <span style=color:#ff7b72;font-weight:700>(</span>99999999<span style=color:#ff7b72;font-weight:700>)</span> does not exist.
</span></span><span style=display:flex><span>解决方案：1。在Docker Hub上查看可用版本的nginx。2.将“99999999”替换为Kubernetes配置中的有效版本。3.重新部署应用程序。
</span></span><span style=display:flex><span>Solution: 1. Check available versions of nginx on Docker Hub. 2. Replace <span style=color:#a5d6ff>&#39;99999999&#39;</span> with a valid version in your Kubernetes configuration. 3. Redeploy the application.
</span></span></code></pre></td></tr></table></div></div><p>解决方法：大模型给出检查当前镜像的版本号是否有效，修改为正确并存在的镜像版本；</p><h4 id=322分析某个命名空间下的service是否存在异常>3.2.2、分析某个命名空间下的Service是否存在异常；</h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt --filter=Pod,Service --namespace=test analyze  --explain</span>
</span></span><span style=display:flex><span> 100% |████████████████████████████████████████████████████████████████████| <span style=color:#ff7b72;font-weight:700>(</span>1/1, <span style=color:#a5d6ff>9</span> it/min<span style=color:#ff7b72;font-weight:700>)</span>        
</span></span><span style=display:flex><span>AI Provider: openai
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a5d6ff>0</span> test/kafka-manager-zk<span style=color:#ff7b72;font-weight:700>(</span>kafka-manager-zk<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>- Error: Service has no endpoints, expected label <span style=color:#79c0ff>app</span><span style=color:#ff7b72;font-weight:700>=</span>kafka-manager-zk
</span></span><span style=display:flex><span>错误：该服务已配置，但没有终结点，因为没有与“app<span style=color:#ff7b72;font-weight:700>=</span>kafka-manager-zk”标签选择器匹配的pod。
</span></span><span style=display:flex><span>Error: The service is configured but has no endpoints because no pods match the <span style=color:#a5d6ff>&#39;app=kafka-manager-zk&#39;</span> label selector.
</span></span><span style=display:flex><span>解决方案：1。检查pod是否正在运行：<span style=color:#a5d6ff>`</span>kubectl get pods-l <span style=color:#79c0ff>app</span><span style=color:#ff7b72;font-weight:700>=</span>kafka manager zk<span style=color:#a5d6ff>`</span>。2.如果没有pod，则部署/创建它们。3.验证吊舱上的标签是否与服务选择器匹配。4.检查吊舱状态是否存在问题。
</span></span><span style=display:flex><span>Solution: 1. Check <span style=color:#ff7b72>if</span> pods are running: <span style=color:#a5d6ff>`</span>kubectl get pods -l <span style=color:#79c0ff>app</span><span style=color:#ff7b72;font-weight:700>=</span>kafka-manager-zk<span style=color:#a5d6ff>`</span>. 2. If no pods, deploy/create them. 3. Verify labels on pods match service selector. 4. Check pod status <span style=color:#ff7b72>for</span> issues.
</span></span></code></pre></td></tr></table></div></div><p>解决方法：在test空间下，存在一个service没有有效的endpoints，大模型给出首先检查当前空间下是否有运行着标签为当前service所选择的pod节点，如果没有则创建它；</p><h4 id=323扫描集群镜像安全问题>3.2.3、扫描集群镜像安全问题</h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@node3<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># k8sgpt analyze --filter=VulnerabilityReport --namespace=moss-system --explain</span>
</span></span><span style=display:flex><span><span style=color:#a5d6ff>14</span> monitoring/statefulset-alertmanager-main-alertmanager<span style=color:#ff7b72;font-weight:700>(</span>alertmanager-main<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>- Error: critical Vulnerability found ID: CVE-2022-23806 <span style=color:#ff7b72;font-weight:700>(</span>learn more at: https://avd.aquasec.com/nvd/cve-2022-23806<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>- Error: critical Vulnerability found ID: CVE-2023-24538 <span style=color:#ff7b72;font-weight:700>(</span>learn more at: https://avd.aquasec.com/nvd/cve-2023-24538<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>- Error: critical Vulnerability found ID: CVE-2023-24540 <span style=color:#ff7b72;font-weight:700>(</span>learn more at: https://avd.aquasec.com/nvd/cve-2023-24540<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>- Error: critical Vulnerability found ID: CVE-2024-24790 <span style=color:#ff7b72;font-weight:700>(</span>learn more at: https://avd.aquasec.com/nvd/cve-2024-24790<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>- Error: critical Vulnerability found ID: CVE-2022-23806 <span style=color:#ff7b72;font-weight:700>(</span>learn more at: https://avd.aquasec.com/nvd/cve-2022-23806<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>- Error: critical Vulnerability found ID: CVE-2023-24538 <span style=color:#ff7b72;font-weight:700>(</span>learn more at: https://avd.aquasec.com/nvd/cve-2023-24538<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>- Error: critical Vulnerability found ID: CVE-2023-24540 <span style=color:#ff7b72;font-weight:700>(</span>learn more at: https://avd.aquasec.com/nvd/cve-2023-24540<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>- Error: critical Vulnerability found ID: CVE-2024-24790 <span style=color:#ff7b72;font-weight:700>(</span>learn more at: https://avd.aquasec.com/nvd/cve-2024-24790<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>trivy扫描结果表明，在系统中发现了多个关键漏洞。具体的CVE ID为CVE-2022-23806、CVE-2023-24538、CVE-202 3-24540和CVE-2024-24790。
</span></span><span style=display:flex><span>The trivy scan results indicate that there are multiple critical vulnerabilities found in the system. The specific CVE IDs are CVE-2022-23806, CVE-2023-24538, CVE-2023-24540, and CVE-2024-24790.
</span></span><span style=display:flex><span>对于CVE-2022-23806，漏洞的根本原因可能是输入验证不当，这可能导致远程代码执行或其他安全问题。缓解此漏洞的一个潜在解决方案是更新受影响的软件或应用供应商提供的修补程序。
</span></span><span style=display:flex><span>For CVE-2022-23806, the root cause of the vulnerability may be improper input validation, which could lead to remote code execution or other security issues. A potential solution to mitigate this vulnerability is to update the affected software or apply patches provided by the vendor.
</span></span><span style=display:flex><span>对于CVE-2023-24538和CVE-2023-202450，扫描结果中没有指定确切的风险或根本原因。然而，建议通过参考提供的链接进行进一步调查以获取更多信息，并了解具体的漏洞，以便应用适当的修复程序。
</span></span><span style=display:flex><span>For CVE-2023-24538 and CVE-2023-24540, the exact risks or root causes are not specified in the scan result. However, it is advisable to investigate further by referring to the provided link <span style=color:#ff7b72>for</span> more information and to understand the specific vulnerabilities in order to apply appropriate fixes.
</span></span><span style=display:flex><span>对于CVE-2024-24790，该漏洞可能与不安全的配置、过时的软件版本或其他因素有关。要解决此漏洞，建议将软件更新到最新版本，实施安全配置，并遵循保护系统的最佳做法。
</span></span><span style=display:flex><span>For CVE-2024-24790, the vulnerability may be related to insecure configurations, outdated software versions, or other factors. To address this vulnerability, it is recommended to update the software to the latest version, implement secure configurations, and follow best practices <span style=color:#ff7b72>for</span> securing the system.
</span></span><span style=display:flex><span>总的来说，及时解决这些关键漏洞对于降低恶意行为者利用的风险和确保系统的安全至关重要。定期的安全扫描、更新和修补程序对于维护安全环境至关重要。
</span></span><span style=display:flex><span>Overall, it is crucial to address these critical vulnerabilities promptly to reduce the risk of exploitation by malicious actors and to ensure the security of the system. Regular security scans, updates, and patches are essential <span style=color:#ff7b72>for</span> maintaining a secure environment.
</span></span></code></pre></td></tr></table></div></div><p>通过配置监控，可以方便的查看集群中的漏洞情况</p><p><a data-fancybox=gallery href=https://blog.xwnlearn.cn/api/v1/look_images/dc46bba79078f235913f6373f7722fab.png><img class=mx-auto alt src=https://blog.xwnlearn.cn/api/v1/look_images/dc46bba79078f235913f6373f7722fab.png></a></p><h3 id=34自动化诊断工具-k8sgpt-operator>3.4、自动化诊断工具 k8sgpt-operator</h3><p>k8sgpt-operator可以自动化检测集群和多集群的状况，并给出满意的解决方案；</p><p>配置k8sgpt-operator很容易，我们只需要安装k8sgpt-operator到集群中，然后配置k8sgpt对象即可；</p><p>k8sgpt-operator提供了两个CRD，K8sGPT用来配置扫描工具的信息，Result展示扫描的集群问题；</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>k8sgpts   core.k8sgpt.ai/v1alpha1 				 true         K8sGPT
</span></span><span style=display:flex><span>results   core.k8sgpt.ai/v1alpha1                true         Result
</span></span></code></pre></td></tr></table></div></div><h4 id=341配置k8sgpt对象>3.4.1、配置k8sgpt对象</h4><p>创建用于大模型的key</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-BASH data-lang=BASH><span style=display:flex><span>kubectl create secret generic k8sgpt-sample-secret --from-literal<span style=color:#ff7b72;font-weight:700>=</span>openai-api-key<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#79c0ff>$OPENAI_TOKEN</span> -n k8sgpt-operator-system
</span></span></code></pre></td></tr></table></div></div><p>创建对象</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#7ee787>apiVersion</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>core.k8sgpt.ai/v1alpha1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>kind</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>K8sGPT</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>metadata</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>k8sgpt-sample</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>namespace</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>k8sgpt-operator-system</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>spec</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>ai</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>baseUrl</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>https://api.xxx.net/v1</span><span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic># 配置api地址</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>enabled</span>:<span style=color:#6e7681> </span><span style=color:#79c0ff>true</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>model</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>gpt-3.5-turbo</span><span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic># 指定使用的模型</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>backend</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>openai</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>secret</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>k8sgpt-sample-secret</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>key</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>openai-api-key </span><span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic># 指定上面创建的key</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>noCache</span>:<span style=color:#6e7681> </span><span style=color:#79c0ff>false</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>repository</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>ghcr.io/k8sgpt-ai/k8sgpt</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>version</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>v0.3.8</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>filters</span>:<span style=color:#6e7681> </span><span style=color:#8b949e;font-style:italic># 过滤需要扫描的对象</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span>- <span style=color:#a5d6ff>Pod</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span>- <span style=color:#a5d6ff>Deployment</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#integrations:</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic># trivy:</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#  enabled: true</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#  namespace: trivy-system</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic># filters:</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#   - Ingress</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic># sink:</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#   type: slack</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#   webhook: &lt;webhook-url&gt; # use the sink secret if you want to keep your webhook url private</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#   secret:</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#     name: slack-webhook</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#     key: url</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#extraOptions:</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#   backstage:</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#8b949e;font-style:italic>#     enabled: true</span><span style=color:#6e7681>
</span></span></span></code></pre></td></tr></table></div></div><p>创建完对象之后，会自动分析k8s集群中有问题的资源</p><h4 id=342分析结果>3.4.2、分析结果</h4><p>查看所有结果</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@master operator<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># kubectl get results -A</span>
</span></span><span style=display:flex><span>NAMESPACE                NAME                                                         KIND          BACKEND
</span></span><span style=display:flex><span>k8sgpt-operator-system   autocaraquatestaquadatasupportmetrics                        Service       openai
</span></span><span style=display:flex><span>k8sgpt-operator-system   autocarbaicguardtestiautoguardadmin                          Deployment    openai
</span></span><span style=display:flex><span>k8sgpt-operator-system   autocarbaicguardtestiautoguardsentrysync745bd5c54bb6sf7      Pod           openai
</span></span><span style=display:flex><span>k8sgpt-operator-system   testtest                                                     StatefulSet   openai
</span></span><span style=display:flex><span>......
</span></span></code></pre></td></tr></table></div></div><p>查看单个问题和修复建议</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>[</span>root@master operator<span style=color:#ff7b72;font-weight:700>]</span><span style=color:#8b949e;font-style:italic># kubectl get results -n k8sgpt-operator-system testtest -o yaml</span>
</span></span><span style=display:flex><span>apiVersion: core.k8sgpt.ai/v1alpha1
</span></span><span style=display:flex><span>kind: Result
</span></span><span style=display:flex><span>metadata:
</span></span><span style=display:flex><span>  creationTimestamp: <span style=color:#a5d6ff>&#34;2024-06-12T02:43:40Z&#34;</span>
</span></span><span style=display:flex><span>  generation: <span style=color:#a5d6ff>1</span>
</span></span><span style=display:flex><span>  labels:
</span></span><span style=display:flex><span>    k8sgpts.k8sgpt.ai/backend: openai
</span></span><span style=display:flex><span>    k8sgpts.k8sgpt.ai/name: k8sgpt-sample
</span></span><span style=display:flex><span>    k8sgpts.k8sgpt.ai/namespace: k8sgpt-operator-system
</span></span><span style=display:flex><span>  name: testtest
</span></span><span style=display:flex><span>  namespace: k8sgpt-operator-system
</span></span><span style=display:flex><span>  resourceVersion: <span style=color:#a5d6ff>&#34;283934122&#34;</span>
</span></span><span style=display:flex><span>  selfLink: /apis/core.k8sgpt.ai/v1alpha1/namespaces/k8sgpt-operator-system/results/testtest
</span></span><span style=display:flex><span>  uid: eabb3c2f-ffb2-4957-8be5-188215a5799c
</span></span><span style=display:flex><span>spec:
</span></span><span style=display:flex><span>  backend: openai
</span></span><span style=display:flex><span>  details: <span style=color:#a5d6ff>&#34;Error: StatefulSet is referencing a non-existent service.\nSolution: \n1.
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>    Check if the service name mentioned in the error message is correct.\n2. Create
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>    a new service with the correct name if it does not exist.\n3. Update the StatefulSet
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>    configuration to use the newly created service.&#34;</span>
</span></span><span style=display:flex><span>  error:
</span></span><span style=display:flex><span>  - sensitive:
</span></span><span style=display:flex><span>    - masked: <span style=color:#79c0ff>Oms4LQ</span><span style=color:#ff7b72;font-weight:700>==</span>
</span></span><span style=display:flex><span>      unmasked: test
</span></span><span style=display:flex><span>    - <span style=color:#ff7b72;font-weight:700>{}</span>
</span></span><span style=display:flex><span>    text: StatefulSet uses the service test/ which does not exist.
</span></span><span style=display:flex><span>  kind: StatefulSet
</span></span><span style=display:flex><span>  name: test/test
</span></span><span style=display:flex><span>  parentObject: <span style=color:#a5d6ff>&#34;&#34;</span>
</span></span><span style=display:flex><span>status:
</span></span><span style=display:flex><span>  lifecycle: historical
</span></span></code></pre></td></tr></table></div></div><h4 id=343可视化分析结果与告警联动>3.4.3、可视化分析结果，与告警联动</h4><p>k8sgpt-operator原生支持与Prometheus集成，配置servicemonitor</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#7ee787>apiVersion</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>monitoring.coreos.com/v1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>kind</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>ServiceMonitor</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>metadata</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>k8sgpt-operator</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>namespace</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>k8sgpt-operator-system</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>spec</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>endpoints</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span>- <span style=color:#7ee787>bearerTokenFile</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>/var/run/secrets/kubernetes.io/serviceaccount/token</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>interval</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>30s</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>port</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>https</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>scheme</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>https</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>tlsConfig</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>insecureSkipVerify</span>:<span style=color:#6e7681> </span><span style=color:#79c0ff>true</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>selector</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>matchLabels</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>app.kubernetes.io/component</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>kube-rbac-proxy</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>app.kubernetes.io/created-by</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>k8sgpt-operator</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>app.kubernetes.io/instance</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>release</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>app.kubernetes.io/managed-by</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>Helm</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>app.kubernetes.io/name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>k8sgpt-operator</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>app.kubernetes.io/part-of</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>k8sgpt-operator</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>app.kubernetes.io/version</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>0.0.26</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>control-plane</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>controller-manager</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>helm.sh/chart</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>k8sgpt-operator-0.1.6</span><span style=color:#6e7681>
</span></span></span></code></pre></td></tr></table></div></div><p>导入grafana视图配置</p><p>下载，<a href=https://github.com/k8sgpt-ai/k8sgpt-operator/blob/main/grafana/k8sgpt-overview.json>k8sgpt-overview.json</a></p><p><a data-fancybox=gallery href=https://blog.xwnlearn.cn/api/v1/look_images/fdbaad286612b2ce524b49ba9c80ac0a.png><img class=mx-auto alt src=https://blog.xwnlearn.cn/api/v1/look_images/fdbaad286612b2ce524b49ba9c80ac0a.png></a></p><p>视图中可以清晰的看到集群中存在问题的对象数量，以及大模型分析的结果数，通过配置相关告警规则，可以将集群中出现的问题推送到自定义的告警平台中；</p><h2 id=四总结>四、总结</h2><p>​ 通过将K8sGPT集成到我们的Kubernetes集群中，我们建立了一个高效的自然语言处理平台，为文本生成、智能对话等任务提供了强大的支持。在当前的集群中，K8sGPT已经展现出诸多优势：通过示例，我们能够更便捷地发现集群中的问题，并快速提供解决方案，从而提高了故障排除的效率，降低了集群维护的难度。</p><p>​ 展望未来，我们对K8sGPT在Kubernetes集群中的应用充满了期待。我们希望通过进一步集成和探索K8sGPT，实现更加智能化的自动化运维。我们的目标是让K8sGPT不仅仅是一个问题诊断工具，而是一个能够主动预测问题、自动修复故障的智能运维助手。这将大大减少运维人员的主动介入，提升集群的稳定性和可靠性。</p><p>​ 此外，我们计划将K8sGPT的应用扩展到多云环境和混合云架构中。无论是公有云、私有云还是边缘计算环境，K8sGPT都将能够提供一致的支持和服务，帮助我们实现更灵活和高效的云端管理。通过这些努力，我们相信K8sGPT将在未来发挥更大的作用，助力我们的集群管理和运维达到新的高度。</p></div><div class=post-archive><ul class=post-copyright><li><strong>原文作者：</strong><a rel=author href=http://xukai885.github.io/>徐同学的博客</a></li><li style=word-break:break-all><strong>原文链接：</strong><a href=http://xukai885.github.io/post/2024/K8sGPT%E5%BA%94%E7%94%A8/>http://xukai885.github.io/post/2024/K8sGPT%E5%BA%94%E7%94%A8/</a></li><li><strong>版权声明：</strong>本作品采用<a rel=license href=https://creativecommons.org/licenses/by-nc-nd/4.0/>知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>. 进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li></ul></div><br><div class=post-archive><h2>相关文章</h2><ul class=listing><li><a href=/post/2024/LocalAI-k8sgpt-operator/>LocalAI+k8sgpt-operator</a></li><li><a href=/post/2024/ApisixRoute%E9%85%8D%E7%BD%AE%E5%90%8E%E7%AB%AF%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4/>ApisixRoute配置后端超时时间</a></li><li><a href=/post/2023/ApiSix%E5%BA%94%E7%94%A8/>ApiSix应用</a></li><li><a href=/post/2022/k8s%E9%9B%86%E6%88%90cephrbd/>k8s集成cephrbd</a></li><li><a href=/post/2022/coredns/>coredns</a></li></ul></div><div class="post-meta meta-tags"><ul class=clearfix><li><a href=/tags/Kubernetes target=_blank>Kubernetes</a></li></ul></div></article><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//yourdiscussshortname.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><div class="post bg-white"><script src=https://utteranc.es/client.js repo="your github repo" issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><footer id=footer><div>&copy; 2025 <a href=http://xukai885.github.io/>徐同学的博客 By 徐同学</a>
| <a rel=nofollow target=_blank href=http://beian.miit.gov.cn/>皖ICP备2020020988号-1</a> | <a href=https://gohugo.io/ target=_black rel=nofollow><span class=badge-subject>Powered by</span><span class="badge-value bg-blue">Hugo</span></a> | <a href=https://github.com/flysnow-org/maupassant-hugo target=_black><span class=badge-subject>Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[["$","$"]],processEscapes:!0}}</script><script src='//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script><script src=//cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js></script><a id=rocket href=#top></a><script type=text/javascript src='/js/totop.js?v=0.0.0' async></script><style type=text/css>div.highlight{position:relative;margin:1em 0}.copy-code{display:none;position:absolute;top:4px;right:4px;color:rgba(255,255,255,.8);background:rgba(78,78,78,.8);border-radius:var(--radius);padding:0 5px;font:inherit;user-select:none;cursor:pointer;border:0;--radius:8px}div.highlight:hover .copy-code,pre:hover .copy-code{display:block}</style><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=/js/douban.js></script></div><div id=secondary><section class=widget><form id=search action=http://xukai885.github.io/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=Search>
<input type=hidden name=sitesearch value=http://xukai885.github.io/>
<button type=submit class="submit icon-search"></button></form></section><section class=widget><h3 class=widget-title>最近文章</h3><ul class=widget-list><li><a href=http://xukai885.github.io/post/2025/Jenkins-Pipeline-%E8%BF%9B%E9%98%B6-%E5%A4%9A%E5%B9%B3%E5%8F%B0%E8%B4%A6%E5%8F%B7%E5%85%B3%E8%81%94%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/ title="Jenkins Pipeline 进阶：多平台账号关联与自动化部署" target=_blank>Jenkins Pipeline 进阶：多平台账号关联与自动化部署</a></li><li><a href=http://xukai885.github.io/post/2025/%E9%AB%98%E5%8F%AF%E7%94%A8harbor/ title=高可用harbor target=_blank>高可用harbor</a></li><li><a href=http://xukai885.github.io/post/2024/%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BAZabbix7.0%E9%AB%98%E5%8F%AF%E7%94%A8%E7%9B%91%E6%8E%A7%E6%96%B9%E6%A1%88/ title=快速构建Zabbix7.0高可用监控方案 target=_blank>快速构建Zabbix7.0高可用监控方案</a></li><li><a href=http://xukai885.github.io/post/2024/Microk8s%E9%83%A8%E7%BD%B2kubeflow/ title=Microk8s部署kubeflow target=_blank>Microk8s部署kubeflow</a></li><li><a href=http://xukai885.github.io/post/2024/K8sGPT%E5%BA%94%E7%94%A8/ title=K8sGPT应用 target=_blank>K8sGPT应用</a></li><li><a href=http://xukai885.github.io/post/2024/LocalAI-k8sgpt-operator/ title=LocalAI+k8sgpt-operator target=_blank>LocalAI+k8sgpt-operator</a></li><li><a href=http://xukai885.github.io/post/2024/ApisixRoute%E9%85%8D%E7%BD%AE%E5%90%8E%E7%AB%AF%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4/ title=ApisixRoute配置后端超时时间 target=_blank>ApisixRoute配置后端超时时间</a></li><li><a href=http://xukai885.github.io/post/2023/apisix-ingress%E4%B8%8Eapisix%E7%9B%91%E6%8E%A7/ title=apisix-ingress与apisix监控 target=_blank>apisix-ingress与apisix监控</a></li><li><a href=http://xukai885.github.io/post/2023/Prometheus/ title=Prometheus target=_blank>Prometheus</a></li><li><a href=http://xukai885.github.io/post/2023/Telegram-bot/ title=Telegram-bot target=_blank>Telegram-bot</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/categories/>分类</a></h3><ul class=widget-list><li><a href=http://xukai885.github.io/categories/CI/CD/>CI/CD (2)</a></li><li><a href=http://xukai885.github.io/categories/Go%E8%AF%AD%E8%A8%80/>Go语言 (2)</a></li><li><a href=http://xukai885.github.io/categories/Kubernetes/>Kubernetes (17)</a></li><li><a href=http://xukai885.github.io/categories/Linux/>Linux (21)</a></li><li><a href=http://xukai885.github.io/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/>中间件 (7)</a></li><li><a href=http://xukai885.github.io/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/>云原生 (1)</a></li><li><a href=http://xukai885.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/>数据库 (9)</a></li><li><a href=http://xukai885.github.io/categories/%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/>日志管理 (1)</a></li><li><a href=http://xukai885.github.io/categories/%E7%9B%91%E6%8E%A7/>监控 (5)</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/tags/>标签</a></h3><div class=tagcloud><a href=http://xukai885.github.io/tags/Docker/>Docker</a>
<a href=http://xukai885.github.io/tags/Go%E8%AF%AD%E8%A8%80/>Go语言</a>
<a href=http://xukai885.github.io/tags/Jenkins/>Jenkins</a>
<a href=http://xukai885.github.io/tags/Kubernetes/>Kubernetes</a>
<a href=http://xukai885.github.io/tags/Linux/>Linux</a>
<a href=http://xukai885.github.io/tags/Pipeline/>Pipeline</a>
<a href=http://xukai885.github.io/tags/Pod/>Pod</a>
<a href=http://xukai885.github.io/tags/Prometheus/>Prometheus</a>
<a href=http://xukai885.github.io/tags/Service/>Service</a>
<a href=http://xukai885.github.io/tags/SSH/>SSH</a>
<a href=http://xukai885.github.io/tags/SSL/>SSL</a>
<a href=http://xukai885.github.io/tags/Zabbix/>Zabbix</a>
<a href=http://xukai885.github.io/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/>中间件</a>
<a href=http://xukai885.github.io/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/>云原生</a>
<a href=http://xukai885.github.io/tags/%E5%AD%98%E5%82%A8/>存储</a>
<a href=http://xukai885.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/>数据库</a>
<a href=http://xukai885.github.io/tags/%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/>日志管理</a>
<a href=http://xukai885.github.io/tags/%E7%9B%91%E6%8E%A7/>监控</a></div></section><section class=widget><h3 class=widget-title>友情链接</h3><ul class=widget-list><li><a target=_blank href=https://www.liwenzhou.com/ title=李文周的博客>李文周的博客</a></li></ul></section><section class=widget><h3 class=widget-title>其它</h3><ul class=widget-list><li><a href=http://xukai885.github.io/index.xml>文章 RSS</a></li></ul></section></div></div></div></div></body></html>